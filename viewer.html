<script>
// Mapeamento atualizado para PDFs locais
const PDF_URLS = {
    'pt': 'guia_pt.pdf',
    'en': 'guia_en.pdf', 
    'es': 'guia_es.pdf'
};

function getPDFUrl(filename) {
    // URL direta - sem parâmetros complexos
    return filename;
}

function setupViewer() {
    const lang = getLanguageFromURL();
    const pdfViewer = document.getElementById('pdfViewer');
    
    // Usa o PDF local do GitHub
    const pdfFile = PDF_URLS[lang];
    pdfViewer.src = pdfFile;
    
    // Configura para abrir links em nova aba
    setupPDFLinks();
}

// Função para configurar links do PDF
function setupPDFLinks() {
    const iframe = document.getElementById('pdfViewer');
    
    // Tenta configurar periodicamente
    const interval = setInterval(() => {
        try {
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            const links = iframeDoc.querySelectorAll('a[href]');
            
            links.forEach(link => {
                const href = link.getAttribute('href');
                if (href && (href.startsWith('http') || href.startsWith('tel:') || href.startsWith('mailto:'))) {
                    link.setAttribute('target', '_blank');
                    link.setAttribute('rel', 'noopener noreferrer');
                }
            });
        } catch (e) {
            // Ignora erros de cross-origin
        }
    }, 2000);
    
    // Para após 10 segundos
    setTimeout(() => clearInterval(interval), 10000);
}
</script>
